(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{101:function(t,e,c){},102:function(t,e,c){},105:function(t,e,c){},106:function(t,e,c){},109:function(t,e,c){"use strict";c.r(e),c.d(e,"BASE_URL",(function(){return $}));var n=c(0),a=c.n(n),r=c(27),o=c.n(r),s=c(13),u=c(63),i=c(5),l=c(21),b={getIsLoggenIn:function(t){return t.auth.isLoggenIn},getUsername:function(t){return t.auth.user.name},getIsFetchingCurrent:function(t){return t.auth.isFetchingCurrentUser}},j=c(24),d=(c(101),c(102),c(125)),h=c(131),O=c(2);function f(){var t=Object(s.c)(b.getUsername),e=Object(s.b)();return Object(O.jsxs)("div",{className:"user_menu",children:[Object(O.jsx)(d.a,{variant:"subtitle1",children:"Hello ".concat(t)}),Object(O.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){e(l.a.logOut())},children:"Logout"})]})}var g=c(129),p=c(130);function v(){var t=Object(s.c)(b.getIsLoggenIn);return Object(O.jsx)(g.a,{position:"static",color:"default",children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(j.b,{to:"".concat($,"/"),exact:!0,className:"link",activeClassName:"activlink",children:"Home"}),!t&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(j.b,{to:"".concat($,"/register"),exact:!0,className:"link",activeClassName:"activlink",children:"Registration"}),Object(O.jsx)(j.b,{to:"".concat($,"/login"),className:"link",activeClassName:"activlink",children:"LogIn"})]}),t&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(j.b,{to:"".concat($,"/contactsbook"),className:"link",activeClassName:"activlink",children:"contactsbook"}),Object(O.jsx)(f,{})]})]})})}var x=c(32),C=c(44),k=["children","redirectTo"];function m(t){var e=t.children,c=t.redirectTo,n=void 0===c?"/":c,a=Object(C.a)(t,k),r=Object(s.c)(b.getIsLoggenIn);return Object(O.jsx)(i.b,Object(x.a)(Object(x.a)({},a),{},{children:r?e:Object(O.jsx)(i.a,{to:n})}))}var I=["children","redirectTo","restricted"];function y(t){var e=t.children,c=t.redirectTo,n=void 0===c?"/":c,a=t.restricted,r=void 0!==a&&a,o=Object(C.a)(t,I),u=Object(s.c)(b.getIsLoggenIn)&&r;return Object(O.jsx)(i.b,Object(x.a)(Object(x.a)({},o),{},{children:u?Object(O.jsx)(i.a,{to:n}):e}))}c(105);var S=Object(n.lazy)((function(){return Promise.all([c.e(0),c.e(6)]).then(c.bind(null,168))})),w=Object(n.lazy)((function(){return Promise.all([c.e(0),c.e(5)]).then(c.bind(null,169))})),L=Object(n.lazy)((function(){return c.e(4).then(c.bind(null,172))})),R=Object(n.lazy)((function(){return c.e(7).then(c.bind(null,170))}));var U,F,E,q=function(){var t=Object(s.b)(),e=Object(s.c)(b.getIsFetchingCurrent);return Object(n.useEffect)((function(){t(l.a.fetchCurrentUser())}),[t]),!e&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{}),Object(O.jsx)("div",{className:"AppRoot",children:Object(O.jsx)(i.d,{children:Object(O.jsxs)(n.Suspense,{fallback:Object(O.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c...."}),children:[Object(O.jsx)(y,{exact:!0,path:"".concat($,"/"),children:Object(O.jsx)(R,{})}),Object(O.jsx)(y,{path:"".concat($,"/register"),restricted:!0,redirectTo:"".concat($,"/contactsbook"),children:Object(O.jsx)(S,{})}),Object(O.jsx)(y,{path:"".concat($,"/login"),restricted:!0,redirectTo:"".concat($,"/contactsbook"),children:Object(O.jsx)(w,{})}),Object(O.jsx)(m,{path:"".concat($,"/contactsbook"),redirectTo:"".concat($,"/"),children:Object(O.jsx)(L,{})})]})})})]})},D=(c(106),c(43)),N=c(4),T=c(69),z=c.n(T),A=c(26),B=c(70),H=c.n(B),J=c(6),P=c(11),_=c(14),M=Object(N.d)([],(U={},Object(J.a)(U,_.a.fatchContactSuccess,(function(t,e){return e.payload})),Object(J.a)(U,_.a.addContactSuccess,(function(t,e){var c=e.payload;return[].concat(Object(D.a)(t),[c])})),Object(J.a)(U,_.a.onDeleteContactSuccess,(function(t,e){var c=e.payload;return t.filter((function(t){return t.id!==c}))})),U)),V=Object(N.d)(!1,(F={},Object(J.a)(F,_.a.fatchContactRequest,(function(){return!0})),Object(J.a)(F,_.a.fatchContactSuccess,(function(){return!1})),Object(J.a)(F,_.a.fatchContactError,(function(){return!1})),Object(J.a)(F,_.a.addContactRequest,(function(){return!0})),Object(J.a)(F,_.a.addContactSuccess,(function(){return!1})),Object(J.a)(F,_.a.addContactError,(function(){return!1})),Object(J.a)(F,_.a.onDeleteContactRequest,(function(){return!0})),Object(J.a)(F,_.a.onDeleteContactSuccess,(function(){return!1})),Object(J.a)(F,_.a.onDeleteContactError,(function(){return!1})),F)),W=Object(N.d)("",Object(J.a)({},_.a.changeFilter,(function(t,e){return e.payload}))),G=Object(P.b)({contactItems:M,filter:W,loading:V}),K=Object(N.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggenIn:!1,isFetchingCurrentUser:!1},extraReducers:(E={},Object(J.a)(E,l.a.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggenIn=!0})),Object(J.a)(E,l.a.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggenIn=!0})),Object(J.a)(E,l.a.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggenIn=!1})),Object(J.a)(E,l.a.fetchCurrentUser.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(J.a)(E,l.a.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggenIn=!0,t.isFetchingCurrentUser=!1})),Object(J.a)(E,l.a.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrentUser=!1})),E)}).reducer,Q=[].concat(Object(D.a)(Object(N.f)({serializableCheck:{ignoredActions:[A.a,A.f,A.b,A.c,A.d,A.e]}})),[z.a]),X={key:"auth",storage:H.a,whitelist:["token"]},Y=Object(N.a)({reducer:{contacts:G,auth:Object(A.g)(X,K)},middleware:Q,devTools:!1}),Z=Object(A.h)(Y),$="/goit-react-hw-08-phonebook";o.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(s.a,{store:Y,children:Object(O.jsx)(u.a,{loading:null,persistor:Z,children:Object(O.jsx)(j.a,{children:Object(O.jsx)(q,{})})})})}),document.querySelector("#root"))},14:function(t,e,c){"use strict";var n=c(4),a=Object(n.b)("contacts/fatchContactRequest"),r=Object(n.b)("contacts/fatchContactSuccess"),o=Object(n.b)("contacts/fatchContactError"),s=Object(n.b)("contacts/addContactRequest"),u=Object(n.b)("contacts/addContactSuccess"),i=Object(n.b)("contacts/addContactError"),l=Object(n.b)("contacts/onDeleteContactRequest"),b=Object(n.b)("contacts/onDeleteContactSuccess"),j={fatchContactRequest:a,fatchContactSuccess:r,fatchContactError:o,addContactRequest:s,addContactSuccess:u,addContactError:i,onDeleteContactError:Object(n.b)("contacts/onDeleteContactError"),onDeleteContactRequest:l,onDeleteContactSuccess:b,changeFilter:Object(n.b)("contacts/changeFilter")};e.a=j},21:function(t,e,c){"use strict";var n=c(25),a=c.n(n),r=c(34),o=c(28),s=c.n(o),u=c(4);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},l=function(){s.a.defaults.headers.common.Authorization=""},b={register:Object(u.c)("auth/register",function(){var t=Object(r.a)(a.a.mark((function t(e){var c,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/signup",e);case 3:return c=t.sent,n=c.data,i(n.token),t.abrupt("return",n);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),logIn:Object(u.c)("auth/login",function(){var t=Object(r.a)(a.a.mark((function t(e){var c,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/login",e);case 3:return c=t.sent,n=c.data,i(n.token),t.abrupt("return",n);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),logOut:Object(u.c)("auth/logout",Object(r.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/logout");case 3:l(),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))),fetchCurrentUser:Object(u.c)("auth/refresh",function(){var t=Object(r.a)(a.a.mark((function t(e,c){var n,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=c.getState(),null!==(r=n.auth.token)){t.next=4;break}return t.abrupt("return",c.rejectWithValue());case 4:return i(r),t.prev=5,t.next=8,s.a.get("/users/current");case 8:return o=t.sent,t.abrupt("return",o.data);case 12:t.prev=12,t.t0=t.catch(5);case 14:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,c){return t.apply(this,arguments)}}())};e.a=b}},[[109,2,3]]]);
//# sourceMappingURL=main.3bff81f6.chunk.js.map