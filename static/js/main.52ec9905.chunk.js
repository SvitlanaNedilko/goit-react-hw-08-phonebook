(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{14:function(t,e,c){"use strict";var n=c(16),a=c.n(n),r=c(22),o=c(18),s=c.n(o),u=c(3);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},l=function(){s.a.defaults.headers.common.Authorization=""},b={register:Object(u.c)("auth/register",function(){var t=Object(r.a)(a.a.mark((function t(e){var c,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/signup",e);case 3:return c=t.sent,n=c.data,i(n.token),t.abrupt("return",n);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),logIn:Object(u.c)("auth/login",function(){var t=Object(r.a)(a.a.mark((function t(e){var c,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/login",e);case 3:return c=t.sent,n=c.data,i(n.token),t.abrupt("return",n);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),logOut:Object(u.c)("auth/logout",Object(r.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/logout");case 3:l(),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))),fetchCurrentUser:Object(u.c)("auth/refresh",function(){var t=Object(r.a)(a.a.mark((function t(e,c){var n,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=c.getState(),null!==(r=n.auth.token)){t.next=4;break}return t.abrupt("return",c.rejectWithValue());case 4:return i(r),t.prev=5,t.next=8,s.a.get("/users/current");case 8:return o=t.sent,t.abrupt("return",o.data);case 12:t.prev=12,t.t0=t.catch(5);case 14:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,c){return t.apply(this,arguments)}}())};e.a=b},74:function(t,e,c){},75:function(t,e,c){},78:function(t,e,c){},79:function(t,e,c){},82:function(t,e,c){"use strict";c.r(e),c.d(e,"BASE_URL",(function(){return Q}));var n=c(0),a=c.n(n),r=c(25),o=c.n(r),s=c(7),u=c(43),i=c(4),l=c(14),b={getIsLoggenIn:function(t){return t.auth.isLoggenIn},getUsername:function(t){return t.auth.user.name},getIsFetchingCurrent:function(t){return t.auth.isFetchingCurrentUser}},j=c(15),d=(c(74),c(75),c(1));function h(){var t=Object(s.c)(b.getUsername),e=Object(s.b)();return Object(d.jsxs)("div",{className:"user_menu",children:[Object(d.jsx)("span",{children:"Hello ".concat(t)}),Object(d.jsx)("button",{className:"button-logout",type:"button",onClick:function(){e(l.a.logOut())},children:"logout"})]})}function O(){var t=Object(s.c)(b.getIsLoggenIn);return Object(d.jsxs)("div",{className:"navigation",children:[Object(d.jsxs)("nav",{children:[Object(d.jsx)(j.b,{to:"".concat(Q,"/"),exact:!0,className:"link",activeClassName:"activlink",children:"Home"}),!t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(j.b,{to:"".concat(Q,"/register"),exact:!0,className:"link",activeClassName:"activlink",children:"Registration"}),Object(d.jsx)(j.b,{to:"".concat(Q,"/login"),className:"link",activeClassName:"activlink",children:"LogIn"})]}),t&&Object(d.jsx)(j.b,{to:"".concat(Q,"/contactsbook"),className:"link",activeClassName:"activlink",children:"contactsbook"})]}),t&&Object(d.jsx)(h,{})]})}var f=c(20),g=c(28),p=["children","redirectTo"];function v(t){var e=t.children,c=t.redirectTo,n=void 0===c?"/":c,a=Object(g.a)(t,p),r=Object(s.c)(b.getIsLoggenIn);return Object(d.jsx)(i.b,Object(f.a)(Object(f.a)({},a),{},{children:r?e:Object(d.jsx)(i.a,{to:n})}))}var x=["children","redirectTo","restricted"];function C(t){var e=t.children,c=t.redirectTo,n=void 0===c?"/":c,a=t.restricted,r=void 0!==a&&a,o=Object(g.a)(t,x),u=Object(s.c)(b.getIsLoggenIn)&&r;return Object(d.jsx)(i.b,Object(f.a)(Object(f.a)({},o),{},{children:u?Object(d.jsx)(i.a,{to:n}):e}))}c(78);var k=Object(n.lazy)((function(){return c.e(5).then(c.bind(null,97))})),m=Object(n.lazy)((function(){return c.e(4).then(c.bind(null,98))})),I=Object(n.lazy)((function(){return c.e(3).then(c.bind(null,100))})),y=Object(n.lazy)((function(){return c.e(6).then(c.bind(null,99))}));var S,w,R,U=function(){var t=Object(s.b)(),e=Object(s.c)(b.getIsFetchingCurrent);return Object(n.useEffect)((function(){t(l.a.fetchCurrentUser())}),[t]),!e&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"AppRoot",children:Object(d.jsx)(O,{})}),Object(d.jsx)("div",{className:"AppRoot",children:Object(d.jsx)(i.d,{children:Object(d.jsxs)(n.Suspense,{fallback:Object(d.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c...."}),children:[Object(d.jsx)(C,{exact:!0,path:"".concat(Q,"/"),children:Object(d.jsx)(y,{})}),Object(d.jsx)(C,{path:"".concat(Q,"/register"),restricted:!0,redirectTo:"".concat(Q,"/contactsbook"),children:Object(d.jsx)(k,{})}),Object(d.jsx)(C,{path:"".concat(Q,"/login"),restricted:!0,redirectTo:"".concat(Q,"/contactsbook"),children:Object(d.jsx)(m,{})}),Object(d.jsx)(v,{path:"".concat(Q,"/contactsbook"),redirectTo:"".concat(Q,"/"),children:Object(d.jsx)(I,{})})]})})})]})},L=(c(79),c(27)),N=c(3),F=c(45),E=c.n(F),q=c(17),D=c(46),T=c.n(D),z=c(5),A=c(6),B=c(9),H=Object(N.d)([],(S={},Object(z.a)(S,B.a.fatchContactSuccess,(function(t,e){return e.payload})),Object(z.a)(S,B.a.addContactSuccess,(function(t,e){var c=e.payload;return[].concat(Object(L.a)(t),[c])})),Object(z.a)(S,B.a.onDeleteContactSuccess,(function(t,e){var c=e.payload;return t.filter((function(t){return t.id!==c}))})),S)),J=Object(N.d)(!1,(w={},Object(z.a)(w,B.a.fatchContactRequest,(function(){return!0})),Object(z.a)(w,B.a.fatchContactSuccess,(function(){return!1})),Object(z.a)(w,B.a.fatchContactError,(function(){return!1})),Object(z.a)(w,B.a.addContactRequest,(function(){return!0})),Object(z.a)(w,B.a.addContactSuccess,(function(){return!1})),Object(z.a)(w,B.a.addContactError,(function(){return!1})),Object(z.a)(w,B.a.onDeleteContactRequest,(function(){return!0})),Object(z.a)(w,B.a.onDeleteContactSuccess,(function(){return!1})),Object(z.a)(w,B.a.onDeleteContactError,(function(){return!1})),w)),_=Object(N.d)("",Object(z.a)({},B.a.changeFilter,(function(t,e){return e.payload}))),M=Object(A.b)({contactItems:H,filter:_,loading:J}),V=Object(N.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggenIn:!1,isFetchingCurrentUser:!1},extraReducers:(R={},Object(z.a)(R,l.a.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggenIn=!0})),Object(z.a)(R,l.a.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggenIn=!0})),Object(z.a)(R,l.a.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggenIn=!1})),Object(z.a)(R,l.a.fetchCurrentUser.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(z.a)(R,l.a.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggenIn=!0,t.isFetchingCurrentUser=!1})),Object(z.a)(R,l.a.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrentUser=!1})),R)}).reducer,W=[].concat(Object(L.a)(Object(N.f)({serializableCheck:{ignoredActions:[q.a,q.f,q.b,q.c,q.d,q.e]}})),[E.a]),G={key:"auth",storage:T.a,whitelist:["token"]},K=Object(N.a)({reducer:{contacts:M,auth:Object(q.g)(G,V)},middleware:W,devTools:!1}),P=Object(q.h)(K),Q="/goit-react-hw-08-phonebook";o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(s.a,{store:K,children:Object(d.jsx)(u.a,{loading:null,persistor:P,children:Object(d.jsx)(j.a,{children:Object(d.jsx)(U,{})})})})}),document.querySelector("#root"))},9:function(t,e,c){"use strict";var n=c(3),a=Object(n.b)("contacts/fatchContactRequest"),r=Object(n.b)("contacts/fatchContactSuccess"),o=Object(n.b)("contacts/fatchContactError"),s=Object(n.b)("contacts/addContactRequest"),u=Object(n.b)("contacts/addContactSuccess"),i=Object(n.b)("contacts/addContactError"),l=Object(n.b)("contacts/onDeleteContactRequest"),b=Object(n.b)("contacts/onDeleteContactSuccess"),j={fatchContactRequest:a,fatchContactSuccess:r,fatchContactError:o,addContactRequest:s,addContactSuccess:u,addContactError:i,onDeleteContactError:Object(n.b)("contacts/onDeleteContactError"),onDeleteContactRequest:l,onDeleteContactSuccess:b,changeFilter:Object(n.b)("contacts/changeFilter")};e.a=j}},[[82,1,2]]]);
//# sourceMappingURL=main.52ec9905.chunk.js.map